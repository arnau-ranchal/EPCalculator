apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: epcalculator-config\n  namespace: epcalculator\n  labels:\n    app: epcalculator\n    component: config\ndata:\n  # Application configuration\n  NODE_ENV: \"production\"\n  PORT: \"8000\"\n  HOST: \"0.0.0.0\"\n  LOG_LEVEL: \"info\"\n  \n  # Database configuration\n  DATABASE_PATH: \"/app/data/epcalculator.db\"\n  DATABASE_WAL_MODE: \"true\"\n  \n  # Security configuration\n  RATE_LIMIT_MAX: \"100\"\n  RATE_LIMIT_WINDOW: \"1 minute\"\n  \n  # Computation configuration\n  MAX_COMPUTATION_TIME: \"30000\"\n  MAX_CONCURRENT_COMPUTATIONS: \"10\"\n  ENABLE_COMPUTATION_CACHE: \"true\"\n  CACHE_TTL: \"3600\"\n  \n  # University-specific configuration\n  UNIVERSITY_NAME: \"UPF\"\n  MAX_USERS: \"50\"\n  ENABLE_USAGE_ANALYTICS: \"true\"\n  \n  # WebAssembly configuration\n  WASM_MEMORY_LIMIT: \"128\"\n  ENABLE_WASM_THREADS: \"false\"\n  \n  # Performance tuning for university servers\n  UV_THREADPOOL_SIZE: \"4\"\n  NODE_OPTIONS: \"--max-old-space-size=512\"\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: epcalculator-secrets\n  namespace: epcalculator\n  labels:\n    app: epcalculator\n    component: secrets\ntype: Opaque\ndata:\n  # Add any sensitive configuration here (base64 encoded)\n  # For now, using empty placeholders\n  DATABASE_ENCRYPTION_KEY: \"\"\n  SESSION_SECRET: \"\"\n  \n# University network configuration\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: nginx-config\n  namespace: epcalculator\n  labels:\n    app: epcalculator\n    component: nginx\ndata:\n  nginx.conf: |\n    worker_processes 1;\n    error_log /var/log/nginx/error.log warn;\n    pid /tmp/nginx.pid;\n    \n    events {\n        worker_connections 1024;\n    }\n    \n    http {\n        include /etc/nginx/mime.types;\n        default_type application/octet-stream;\n        \n        # Logging\n        log_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n                       '$status $body_bytes_sent \"$http_referer\" '\n                       '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n        access_log /var/log/nginx/access.log main;\n        \n        # Performance tuning for university servers\n        sendfile on;\n        tcp_nopush on;\n        tcp_nodelay on;\n        keepalive_timeout 65;\n        types_hash_max_size 2048;\n        client_max_body_size 10M;\n        \n        # Gzip compression\n        gzip on;\n        gzip_vary on;\n        gzip_min_length 1024;\n        gzip_comp_level 6;\n        gzip_types\n            text/plain\n            text/css\n            text/xml\n            text/javascript\n            application/json\n            application/javascript\n            application/xml+rss\n            application/atom+xml\n            image/svg+xml\n            application/wasm;\n        \n        # Security headers\n        add_header X-Frame-Options DENY;\n        add_header X-Content-Type-Options nosniff;\n        add_header X-XSS-Protection \"1; mode=block\";\n        add_header Referrer-Policy strict-origin-when-cross-origin;\n        \n        server {\n            listen 80;\n            server_name _;\n            root /usr/share/nginx/html;\n            index index.html;\n            \n            # Health check endpoint\n            location /health {\n                access_log off;\n                return 200 \"healthy\\n\";\n                add_header Content-Type text/plain;\n            }\n            \n            # API proxy\n            location /api {\n                proxy_pass http://epcalculator-backend:8000;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_set_header X-Forwarded-Proto $scheme;\n                \n                # Timeouts for long computations\n                proxy_connect_timeout 60s;\n                proxy_send_timeout 60s;\n                proxy_read_timeout 60s;\n            }\n            \n            # Static files with caching\n            location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|wasm)$ {\n                expires 1y;\n                add_header Cache-Control \"public, immutable\";\n                gzip_static on;\n            }\n            \n            # SPA fallback\n            location / {\n                try_files $uri $uri/ /index.html;\n            }\n        }\n    }"